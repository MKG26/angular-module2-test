<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ isEditing ? 'Edit Book' : 'Add New Book' }}</h5>
        <form (ngSubmit)="onSubmit()" #bookForm="ngForm">
            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input type="text" class="form-control" id="title" [(ngModel)]="book.title" name="title" required
                    #title="ngModel" minlength="2" />
                <div *ngIf="title.invalid && (title.dirty || title.touched)" class="text-danger">
                    <small *ngIf="title.errors?.['required']">Title is required</small>
                    <small *ngIf="title.errors?.['minlength']">Title must be at least 2 characters</small>
                </div>
            </div>
            <div class="mb-3">
                <label for="author" class="form-label">Author</label>
                <input type="text" class="form-control" id="author" [(ngModel)]="book.author" name="author" required
                    #author="ngModel" minlength="2" />
                <div *ngIf="author.invalid && (author.dirty || author.touched)" class="text-danger">
                    <small *ngIf="author.errors?.['required']">Author is required</small>
                    <small *ngIf="author.errors?.['minlength']">Author must be at least 2 characters</small>
                </div>
            </div>
            <div class="mb-3">
                <label for="isbn" class="form-label">ISBN</label>
                <input type="text" class="form-control" id="isbn" [(ngModel)]="book.isbn" name="isbn" required
                    #isbn="ngModel" pattern="^(?=(?:\D*\d){10}(?:(?:\D*\d){3})?$)[\d-]+$" />
                <div *ngIf="isbn.invalid && (isbn.dirty || isbn.touched)" class="text-danger">
                    <small *ngIf="isbn.errors?.['required']">ISBN is required</small>
                    <small *ngIf="isbn.errors?.['pattern']">Please enter a valid ISBN (10 or 13 digits)</small>
                </div>
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-success" [disabled]="!bookForm.form.valid">
                    {{ isEditing ? 'Update Book' : 'Add Book' }}
                </button>
                <button type="button" class="btn btn-secondary" (click)="onCancel()">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>